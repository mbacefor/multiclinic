<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:a4j="http://richfaces.org/a4j" xmlns:p="http://primefaces.org/ui">

<ui:composition template="/templates/editarTemplate.xhtml">
	<ui:define name="tituloPagina">Tela de Edição de Agenda</ui:define>
	<ui:define name="sidebar-painel-heading">Edição de Agenda</ui:define>
	<ui:define name="sidebar-panel-body-texto">Esta opção permite editar ou criar uma nova Agenda</ui:define>
	<ui:define name="subtituloPagina">Tela de Edição/criação de Agenda</ui:define>
	<ui:define name="descricaoTituloPagina">Esta funcionalidade permite editar ou criar uma nova Agenda</ui:define>
	<ui:define name="criadorEntidade"> #{editarClinicaMB.clinica.usuarioCriador.email} </ui:define>
	<ui:define name="dataCriacaoEntidade">
		<h:outputText value="#{editarClinicaMB.clinica.dataCadastro}">
			<f:convertDateTime type="both" dateStyle="medium" />
		</h:outputText>
	</ui:define>
	<ui:define name="camposFormulario">

		<p:fieldset legend="Filtro" toggleable="true">
			<h:panelGrid columns="2" width="90%" cellpadding="3" cellspacing="3">
				<h:panelGroup>
					<p>
						<p:outputLabel value="Profissional" for="profissional" />
						<br />
						<p:selectOneMenu id="profissional"
							value="#{editarAgenda.profissional}"
							converter="defaultConverterJSF2" var="p">
							<f:selectItem itemLabel="Selecione" itemValue="" />
							<f:selectItems value="#{editarAgenda.listaProfissionaisFiltro}"
								var="prof" itemLabel="#{prof.nome}" itemValue="#{prof}" />
							<p:column>
								<p:graphicImage value="/photocam/#{p.nomeFoto}.png" width="40"
									height="50" />
							</p:column>
							<p:column> #{p.nome} - #{p.cpf} </p:column>


						</p:selectOneMenu>
					</p>
				</h:panelGroup>

				<p:commandButton ajax="false" value="Filtrar"
					action="#{editarAgenda.filtrar}" />
			</h:panelGrid>

		</p:fieldset>
		<p:fieldset legend="Agenda" toggleable="true">
			<h:panelGrid columns="1" width="90%" cellpadding="3" cellspacing="3">
				<h:panelGroup>
					<p:schedule value="#{editarAgenda.eventModel}"
						rendered="#{editarAgenda.profissional != null? true : false}"
						editable="#{editarAgenda.profissional != null? true : false}"
						locale="pt" widgetVar="myschedule">
						<p:ajax event="dateSelect" listener="#{editarAgenda.onDateSelect}"
							oncomplete="PF('eventDialog').show()"
							update=":fDialog:eventDetails" />
						<p:ajax event="eventSelect"
							listener="#{editarAgenda.onEventSelect}"
							update=":fDialog:eventDetails"
							oncomplete="PF('eventDialog').show();">
						</p:ajax>
					</p:schedule>
				</h:panelGroup>

			</h:panelGrid>
		</p:fieldset>

		<br />
	</ui:define>
	<ui:define name="areaForaForm">

		<p:dialog widgetVar="eventDialog" header="Agendamento"
			id="idEventDialog">
			<h:form id="fDialog">
				<p:messages></p:messages>
				<p:fieldset legend="Dados Consulta" toggleable="true">
					<p:panelGrid id="eventDetails" columns="2">
						<h:panelGroup>
							<p>
								<h:outputLabel for="paciente" value="Paciente:" />
								<p:selectOneMenu id="paciente"
									value="#{editarAgenda.event.evento.paciente}" required="true"
									converter="defaultConverterJSF2" var="p">
									<f:selectItem itemLabel="Selecione" itemValue="" />
									<f:selectItems value="#{editarAgenda.listaPacientes}"
										var="paci" itemLabel="#{paci.nome}" itemValue="#{paci}" />
									<p:column>
										<p:graphicImage value="/photocam/#{p.nomeFoto}.png" width="45"
											height="45" />
									</p:column>
									<p:column>#{p.id} - #{p.nome} - #{p.fone} </p:column>
									<p:column>
										<h:outputText value="#{p.dataAniversario}">
											<f:convertDateTime locale="pt_BR"
												timeZone="America/Sao_Paulo" />
										</h:outputText>
									</p:column>
								</p:selectOneMenu>
							</p>
						</h:panelGroup>
						<h:panelGroup>
							<p>
								<h:outputLabel for="profissionalEvento" value="Profissional:" />
								<p:selectOneMenu id="profissionalEvento"
									value="#{editarAgenda.event.evento.profissional}"
									required="true" converter="defaultConverterJSF2" var="p">
									<f:selectItem itemLabel="Selecione" itemValue="" />
									<f:selectItems value="#{editarAgenda.listaProfissionais}"
										var="prof" itemLabel="#{prof.nome}" itemValue="#{prof}" />
									<p:column>
										<p:graphicImage value="/photocam/#{p.nomeFoto}.png" width="45"
											height="45" />
									</p:column>
									<p:column>#{p.id} - #{p.nome} - #{p.fone} </p:column>
									<p:column>
										<h:outputText value="#{p.dataAniversario}">
											<f:convertDateTime locale="pt_BR"
												timeZone="America/Sao_Paulo" />
										</h:outputText>
									</p:column>
								</p:selectOneMenu>
							</p>
						</h:panelGroup>
						<h:panelGroup>
							<p>
								<h:outputLabel for="clinica" value="Clinica:" />
								<p:selectOneMenu id="clinica"
									value="#{editarAgenda.event.evento.clinica}" required="true"
									converter="defaultConverterJSF2" var="p">
									<f:selectItem itemLabel="Selecione" itemValue="" />
									<f:selectItems value="#{editarAgenda.listaClinicas}"
										var="clinic" itemLabel="#{clinic.nome}" itemValue="#{clinic}" />
									<p:column>#{p.id} - #{p.nome} </p:column>
									<p:column>
										<h:outputText value="#{p.cnpj}">
										</h:outputText>
									</p:column>
								</p:selectOneMenu>
							</p>
						</h:panelGroup>
						<p:panelGrid columns="2" layout="grid">
							<h:panelGroup>
								<p>
									<p:outputLabel for="from" value="Início: " />
									<br />
									<p:calendar id="from" value="#{editarAgenda.event.startDate}"
										pattern="dd/MM/yyyy HH:mm" mask="true" />
								</p>
							</h:panelGroup>
							<h:panelGroup>
								<p>
									<p:outputLabel for="to" value="Fim:" />
									<br />
									<p:calendar id="to" value="#{editarAgenda.event.endDate}"
										pattern="dd/MM/yyyy HH:mm" mask="true" />
								</p>
							</h:panelGroup>
						</p:panelGrid>
						<h:panelGroup>
							<p:outputLabel value="Título:" for="title" dir="ltr" />
							<br />
							<p:inputText id="title" value="#{editarAgenda.event.title}"
								size="55" readonly="true" />

						</h:panelGroup>

						<h:panelGroup>
							<p:outputLabel value="Observação:" for="observacao" dir="ltr" />
							<br />
							<p:inputTextarea id="observacao"
								value="#{editarAgenda.event.description}" rows="3" cols="50" />

						</h:panelGroup>
						<h:panelGroup>
							<p>
								<h:outputLabel for="custo" value="Valor:" />
								<br />
								<p:inputMask id="custo"
									value="#{editarAgenda.event.evento.valor}"></p:inputMask>
							</p>
						</h:panelGroup>


						<p:panelGrid columns="2" layout="grid">
							<h:panelGroup>
								<p>
									<h:outputLabel for="estilo" value="Estilo:" />
									<br />
									<p:selectOneMenu id="estilo"
										value="#{editarAgenda.event.styleClass}">
										<f:selectItem itemLabel="Marcado" itemValue="alert-warning" />
										<f:selectItem itemLabel="Confirmado" itemValue="alert-success" />
										<f:selectItem itemLabel="Atendido" itemValue="alert-info" />

									</p:selectOneMenu>

								</p>
							</h:panelGroup>
							<h:panelGroup>
								<p>
									<h:outputLabel for="allDay" value="Dia Inteiro" />
									<br />
									<h:selectBooleanCheckbox id="allDay"
										value="#{editarAgenda.event.allDay}" />
								</p>
							</h:panelGroup>
						</p:panelGrid>

					</p:panelGrid>


				</p:fieldset>
				<p:panelGrid columns="3" layout="tabular">

					<p:commandButton type="reset" value="Fechar"
						onclick="PF('eventDialog').hide();" />

					<p:commandButton value="Salvar"
						action="#{editarAgenda.addEventAction}"
						oncomplete="PF('myschedule').update();" update="fDialog" />

					<p:commandButton value="Excluir"
						actionListener="#{editarAgenda.delEvent}"
						oncomplete="PF('myschedule').update();PF('eventDialog').hide();" />

				</p:panelGrid>
			</h:form>
		</p:dialog>


	</ui:define>

	<ui:define name="botoes">
	</ui:define>
</ui:composition>

</html>